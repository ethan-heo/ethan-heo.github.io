## 도메인 로직 인터페이스 구현

- 도메인 로직을 함수로 구현하여 내보내기 할 예정.
- 검색 로직에 대한 비즈니스 로직 인터페이스를 정의
    - 검색어 유효성 검사, 검색 결과 변환, 검색 조건
- 외부 서비스에서 받은 데이터 목록을 BlogItem 형식의 목록으로 변환하는 로직의 인터페이스를 정의
- 외부 서비스 컨텐츠를 입력 받아 BlogContent 형식으로 변환하는 로직의 인터페이스를 정의
- 비즈니스 로직에 대한 인식이 개선되는 것 같이 느껴짐. 프론트 개발이 그런지 아닌지 잘 모르겠지만 프로그래밍 개념 자체를 높게 추상화해서 작업했던 것 같다. 이렇게 로직에 대한 개념을 나누어 작업하는게 솔직히 쉽진 않았는데 이걸 하면서 테스트나 여러 방면에서 활용할 여지가 많아지고 레이어에 대한 이해가 높아진 것 같다.

## BlogContent 변환을 위한 비즈니스 로직 구현

- 유니온 타입의 NotionBlogBlockType를 사용하여 변환 로직에 대한 타입을 매핑하는 과정에서 Extract를 사용시 유니온 타입의 값을 추론하지 않고 유니온 타입 식별자를 상대로 추론하고 있어 Extract를 통해 원하는 타입을 가져올 수 없는 상황
    - 동작 과정에서는 Extract 내 extends 를 통해 값이 존재하는지 확인하는 과정에서 존재하지 않다고 판단했기 때문에 never 타입이 정의 되는 상황
    - 해결 방법은 유니온 타입의 값 마다 별도로 extends를 통해 존재 여부를 정의해주어야 함.
    - NotionBlogBlockType의 타입을 추론하여 명시적으로 값의 타입을 정의하도록 구성
- TransformerMap 메서드의 일반 프로퍼티를 추상화해서 반복적인 작업을 줄이려고 함.
    - OriginalBlockContent의 타입을 기준으로 정의가 되기 때문에 type이 넓게 추론되어 구조적으로 맞지 않게 됨.
    - 추상화 함수의 파라미터를 제네릭을 활용하여 입력된 값의 타입을 기준으로 처리하면 될거라 생각. 하지만 내부 프로퍼티의 값을 사용할 때 OriginalBlockContent가 사용되어 넓게 추론됨.
        - 사용하지 않기로 결정. 그 넓은 추론이 가능한 이유가 설명이 안되기 때문.
- CreateBlock에서 A 제네릭 타입이 없을 때 content 타입이 never로 정의 됨. 이 때 실제 구현시 content 속성을 정의해줘야 하는데 never를 정의할 수 없어 null로 변경함.
- [TODO] Transformer 인터페이스가 NotionBlock과 의존성이 높음. 이걸 해결할 방법을 생각해보면 좋을듯.
- [TODO] createOriginalBlogContentTransformer 의 반환된 함수의 반환값 처리 작업중 transformer의 함수 인자가 never로 정의됨. any로 처리해두었지만 확인이 필요.

### 검색 결과 반환 비즈니스 로직 구현

- 비즈니스 로직
    1. 검색어 유효성 검사
    2. 검색 결과 반환, 조건 처리
       3, 검색 결과 변환
- 검색어 유효성 검사
    - 빈문자가 있을 경우 에러를 일으킨다. 서비스 로직에서 에러를 캐치하여 후처리를 진행하도록 만든다.
- 검색 결과 반환, 조건 처리
    - 검색어와 블로그 데이터를 받아 title, description, categories에서 키워드에 포함된 단어가 있으면 블로그 데이터를 반환하도록 한다.
- 검색 결과 변환
    - 블로그의 모든 속성이 검색결과에 사용될 필요가 없기 때문에 id, title 속성만 매핑해 반환한다.
